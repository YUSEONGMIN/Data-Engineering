### [전체 목차](../../README.md)
### [이전 페이지](../README.md)

# 4 일차
모듈, 패키지, 라이브러리 

## 목차

- [Module/Package](#modulepackage)
- [import](#import)
    - import 구문
    - 모듈 내의 특정 항목만 import
    - 패키지에 속한 모듈 import
- [메인 모듈과 하위 모듈](#메인-모듈과-하위-모듈)
- [PIP 주요 명령어](#pip-주요-명령어)

## [Module/Package](#목차)

### 모듈

- 독립적인 기능을 가지고 재사용 가능한 프로그램 단위
- 모듈은 재사용 가능한 함수, 클래스 등을 작성한 소스 파일
    - 함수나 클래스를 작성한 `.py` 스크립트 파일이 모듈이 된다.
- 모듈의 함수나 클래스들을 다른 python 프로그램에서 호출하여 사용할 수 있다.
    - 단 사용하기 위해서는 `import` 를 먼저 해야 한다.
- 이런 모듈들을 모아 놓으면 라이브러리가 된다.

- **모듈의 종류**
    - 표준 모듈
        - 파이썬에 내장된 모듈
    - 사용자 정의 모듈
        - 개발자가 재사용을 위해 직접 만든 모듈 
    - 3rd Party 모듈
        - 특정 개발업체나 개발자들이 만들어 배포하는 모듈
        - 사용자 정의 모듈도 배포되어 다른 곳에서 사용되면 3rd party 모듈

### 패키지(라이브러리)
- 모듈들을 모아 놓은 것
- 물리적으로는 모듈 파일(.py)들을 모아놓은 디렉토리(폴더)  
- **Root Package**
    - 전체 모듈들을 담고 있는 최상위 패키지(디렉토리)
    - 패키지 내의 속한 패키지를 통칭 **sub package** 라고 한다.
    - Root package를 제외한 모든 package들은 다 sub package

## [import](#목차)

- 모듈 파일에 정의된 변수, 함수, 클래스들을 사용하기 위해 **파이썬 실행환경에 등록하는 작업**
- **다른 모듈에 있는 것들은 사용하기 위해 import 작업을 먼저 해야 한다.**
- 모듈을 import 하면 모듈의 내용이 실행되면서 그 안에 구현된 변수, 함수, 클래스들이 파이썬 실행환경에 그 모듈 이름을 `namespace`로 하여 등록된다.

> - **namespace**
>    - 여러 객체를 하나로 묶어 주면서 구분자 역할을 하는 이름을 주는 것
>    - namespace를 이용해 각 그룹들의 객체들을 구분할 수 있다.
>    - 모듈에 정의된 변수 등 실행환경에 등록할 때 모듈명을 namespace로 묶어서 등록한다.

### import 구문

- `[from 사용할 것의 경로] import 사용할 것 [as 별칭] [, 사용할 것 [as 별칭], ...]`

```python
import 모듈 # 하나의 모듈 import
import 모듈 as 별칭 # namespace의 이름을 모듈명이 아니라 별칭으로 지정한다.
import 모듈_1, 모듈_2 # 여러 모듈 import -> ','를 구분자로 나열한다.
```

- 모듈 안에 함수, 클래스들을 사용할 때
    - **모듈명이 namespace의 이름이므로** `모듈명.함수()`, `모듈명.Class` 구문으로 호출한다.
    - namespace의 이름은 **import 뒤에 지정한 이름으로 설정된다.**
    - 별칭(Alias)를 주면 namespace의 이름으로 지정한 별칭을 사용한다.

```python
import test_module
import my_module as mm

# test_module의 hello() 함수 호출시
test_module.hello()

# my_module은 mm 별칭을 지정했으므로 mm을 namespace로 사용한다.
p = mm.Person('홍길동', 30) # my_module의 Person 클래스 객체 생성

import A, B
from test import A, B
import A as a, B as b
```

- 모듈 내의 특정 항목만 import

```python 
from 모듈 import 함수  # 함수/클래스가 있는 모듈과 함수를 분리해서 import한다.
from 모듈 import 클래스
from 모듈 import 함수_1, 함수_2, 클래스
from 모듈 import *   
```

- 모듈에 정의된 **일부 함수/클래스만 사용할 경우** 개별적으로 import 할 수 있다.
- `from 모듈 import 함수`: **함수/클래스들이 현재 실행중인 모듈의 namespace로 들어간다.**
- `*`를 이용하면 그 모듈의 모든 함수/클래스들을 추가

```python 
def plus():
    print("덧셈")

plus()
> 덧셈

from my_package.calculator import * # 덮어질 수 있음
print(plus(1,1), divide(100,50))
> 2 2.0
```

- 패키지에 속한 모듈 import

```python
import 패키지명.모듈

from 패키지명 import 모듈
from 패키지명 import 모듈_1, 모듈_2
from 패키지명.모듈 import 함수
from 패키지명.모듈 import 클래스
from 패키지명.모듈 import 함수_1, 함수_2, 클래스
from Root패키지.Sub패키지1.Sub패키지2 import 모듈

# 패키지가 계층구조로 되있을 경우 `.` 으로 이용해 나열한다.
from Root패키지.Sub패키지1.Sub패키지2.모듈 import 함수
from Root패키지.Sub패키지1.Sub패키지2.모듈 import 클래스
```

- **import 가능한 것은 모듈, 변수, 함수, 클래스 들이다.** (패키지는 import 할 수 없다.)

### my_module에 있는 함수/클래스 사용

```py
import my_module
> my_module.__name__: my_module

# my_module의 greet 함수 호출
my_module.greet("홍길동")
> '홍길동님 안녕하세요'

p = my_module.Person("이순신", 30)
print(p)
> 이름: 이순신, 나이: 30
```

주피터노트북 기능  
`%%writefile .py # 새로 쓰기/덮어쓰기`

```py
%%writefile run.py
# run.py에서 my_module의 함수를 사용
import my_module as mm
from my_package import calculator as c

print("__name__:", __name__)

print("덧셈:", c.plus(100, 200))

txt = mm.greet("홍길동")
print(txt)

p = mm.Person("이순신", 30)
print(p)

txt2 = mm.greet(p.name)
print(txt2)
```

```py
%%writefile run2.py
# 모듈 안의 특정 함수/클래스만 import
# from 모듈명 import import 대상
from my_module import greet

txt = greet("홍길동")
print(txt)
```


```py
%%writefile my_package/calculator.py

def plus(num1, num2):
    return num1 + num2

def minus(num1, num2):
    return num1 - num2

def multipy(num1, num2):
    return num1 * num2

def divide(num1, num2):
    return num1 / num2
```

```py
import my_package.calculator

my_package.calculator.plus(1,2)
> 3

import my_package.calculator as calc
calc.plus(100,200)
> 300

# import 모듈/모듈안에 함수
from my_package import calculator # as calc
calculator.minus(10,5)
> 5
```

## [메인 모듈과 하위 모듈](#목차)

- **메인 모듈**
    - 현재 실행하고 있는 모듈 -> `모듈.py`로 실행된 모듈
    - application의 main logic을 처리한다.
- **하위 모듈**
    - 메인 모듈에서 import 되어 실행되는 모듈

> 모듈을 import 하면 그 모듈에 있는 실행코드들도 같이 실행된다.  
> 이것을 방지하기 위해 모듈이 메인 모듈로 실행되는지 하위 모듈로 실행되는지 확인한다.

- `__name__`: 내장 전역변수
    - 실행 중인 모듈명을 저장하는 내장 전역변수
    - **메인 모듈은 '\_\_main\_\_'**
    - **하위 모듈은 모듈명(파일명)**
    - 모듈이 메인 모듈로 시작하는지 확인 할 때 사용한다.
    
```python
if __name__ == '__main__':
    # 메인모듈일 때만 실행할 코드 블록
```

```py
%%writefile run.py
# run.py에서 my_module의 함수를 사용
import my_module as mm
from my_package import calculator as c
print("__name__:", __name__)
print("덧셈:", c.plus(100, 200))
txt = mm.greet("홍길동")
print(txt)
p = mm.Person("이순신", 30)
print(p)
txt2 = mm.greet(p.name)
print(txt2)
```

```py
__version__ = 1.0
def greet(name):
    return f"{name}님 안녕하세요"
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age
    def __str__(self):
        return f"이름: {self.name}, 나이: {self.age}"
print("my_module.__name__:", __name__)
if __name__ == "__main__":
    print("my_module.__name__:", __name__)
    print(greet("이름"))
    p = Person("이영수", 10)
    print(p)
```

run.py 안에 `import my_module`은 서브 모듈 -> `__name__`: my_module, 메인 모듈은 `run`

```
!python run.py

> my_module.__name__: my_module
> __name__: __main__
> 덧셈: 300
> 홍길동님 안녕하세요
> 이름: 이순신, 나이: 30
> 이순신님 안녕하세요

!python my_module.py

> my_module.__name__: __main__
> my_module.__name__: __main__
> 이름님 안녕하세요
> 이름: 이영수, 나이: 10
```

## [PIP 주요 명령어](#목차)
- **라이브러리 관리 툴**
- `pip --help`
- `pip install 라이브러리[==version]` 
- `pip install --upgrade 라이브러리[==version]`, \-U \-\-upgrade
- `pip install --requirement 파일경로`,  \-r, \-\-requirement
- `pip freeze > 파일명.txt`
- `pip uninstall 패키지명`
- `pip list`: 설치된 모든 library 목록을 출력한다.
- `pip show 라이브러리`: 지정한 library의 정보를 출력한다.

### [목차로 돌아가기](#목차)
## [이전 페이지](../README.md)
